# TaskDistribution
## 任务分配原则梳理
### 名词解释
    1、建制：表示一个车队和中的车辆编制顺序，通常为6个车队，每个车队6-8量车，建制由车队编号和车辆编号共同决定
    2、卸货地域：包含卸货区和卸货地点，其中卸货区可以容纳多量车卸货，有容量限制，卸货点仅允许一辆车卸货
    3、片区：包含卸货区，一个片区可有有多个卸货区和多个卸货点


### 一、车辆分配原则
    1、 货物转载数量尽可能少：【默认规则】分配的车辆所载货物尽可能与任务要求一致，避免货物转载。	独立，非必选项，默认选中
    2、避免跨区卸货：【默认规则】无依托模式下，同一个车队的车尽可能使用同一个卸货区。独立，必选项，默认选中
    3、 3.1）任务集中：按建制集中使用，如：按建制使用两个车队，集中使用其中一个车队。
    3.2）任务分散：按建制分散使用，如：按建制使用两个车队，任务均分到两个车队。
    3.1与3.2互斥，必选一项，默认选中“任务集中”
    4、指定车队或车辆优先：尽可能优先使用用户指定的车队、车辆参与任务。独立，可选项，默认不选中
    5、 5.1）车辆数量最多：一辆车载多种货物时，在同一次任务中使用尽可能多的车辆参与任务。	互斥，必选项，默认选中“车辆数量最少”
    5.2）车辆数量最少：一辆车载多种货物时，在同一次任务中使用尽可能少的车辆参与任务。
    6、不同组匹配不同车辆：一辆车载多种货物时，不同的任务组尽可能使用不同的车辆参与任务。	独立，可选项，默认选中
### 二、卸货位置分配原则
    1、避免交叉：【默认规则】同一次任务中，任务中会有一个或多个参考点，尽可能使用南边的卸货地域对应南边的参考点，北边的卸货地域对应北边的参考点，东西方向同理。独立，必选项，默认选中
    2、一个车队一个卸货：【默认规则】一个卸货区只放一个车队	。独立，必选项，默认选中
    3、 3.1）卸货区优先：在同一次任务中，尽可能优先使用卸货区参与任务。
    3.2）卸货点优先：在同一次任务中，尽可能优先使用卸货点参与任务。
    3.1与3.2互斥，且必选一项 。
    4、指定卸货位置优先：在一次任务中，尽可能优先使用用户指定的卸货区和卸货点地参与任务。独立，可选项，默认不选中
    5、 5.1）依次：按照卸货区和卸货点数据的数据录入顺序，在同一次任务中依次使用对应的卸货区、卸货点地参与任务。
    5.2反序：按照卸货区和卸货点数据的数据录入顺序，在同一次任务中反序使用对应的卸货区和卸货点参与任务。
    5.3就近：根据卸货区或卸货点真实位置和车辆当前位置信息，在同一次任务中尽可能分配距离车辆最近的卸货区或卸货点参与任务。
    5.4预设：根据“车辆-卸货点”预设和“车队-卸货区”的预设情况，在同一次任务中尽可能使用用户预设的车辆和卸货地域参与任务。
    5.1、5.2、5.3、5.4互斥，且必选一项。
## 输入
    1）任务信息：任务要求的货物（货物属性1、货物属性2、货物属性3、货物属性4、货物属性5）、车辆任务区分ID、参考点（参考点编号）、卸货片区（卸货片区编号）；
    2）货车信息：车辆载货信息/可载货物信息、当前位置（经度、纬度）、车辆平均速度
    3）卸货位置信息：卸货片区、卸货区域（区编号、容量、中心点）、卸货地点（卸货点编号）
    4）原则和约束配置情况

### 输入定义如下：
   	RWFPSR: { // 任务分配输入
    RWXX: [{ // 任务要求信息，
            ID: '',//任务ID
			DDXH: '', // 货物属性1
			ZDBLX: '', // 货物属性2
			DDPC: '', // 货物属性3
			TFZZPZBZ: '', // 货物属性4
			ZDZZPZBZ: '', // 货物属性5
			DWBH: '', // 货物在车上的位置编号
			MZDBH: '', // 参考点编号  
			ZZQBH: '', // 片区编号
			MZD_JD: '', // 参考点经度
			MZD_WD: '', // 参考点纬度
			MZD_GC: '', // 参考点高程
		}],
		BLXX: [{ // 兵力信息
		    FSDYBH: '', //车辆编号
			FSYBDNM:'', //车队编号
			ZDZDSL: '', //车辆最大载货数量
			ZDXX:[{
				DDXH: '', // 货物属性1
				ZDBLX: '', // 货物属性2
				DDPC: '', // 货物属性3
				TFZZPZBZ: '', // 货物属性4
				ZDZZPZBZ: '' // 货物属性5
			}],
			FSDYKZDXX: {// 车辆可载货物型号
				DDXH: '', // 货物属性1
				ZDBLX: '',// 货物属性2
			},
			FSDY_JD: '', // 车辆当前位置经度
			FSDY_WD: '', // 车辆当前位置纬度
			FSDY_GC: '', // 车辆当前位置高程
			
			FSDY_KYFSZDJL: [{ // 车辆与所有可用卸货点之间的距离
				FSZDBH: '',  // 卸货点编号
				JL: '' // 距离
			}],
			
			FSDY_KYFSQJL: [{  //车辆与所有可用卸货区之间的距离
				FSQBH: '', // 卸货区编号
				JL: '' // 距离
			}]
        }],
				
		ZCXX: { // 战场信息
			ZZQ: [{ // 片区
                ZZQBH: '', // 片区编号
                FSZD: [{ //卸货点
                    FSZDBH: '', // 卸货点编号
                    FSZD_JD: '', // 卸货点经度
                    FSZD_WD: '', // 卸货点纬度
                    FSZD_GC: '', // 发卸货点高程
                    FSZDPX_IDX: '' // 卸货点排序索引
                }],
				FSQ: [{
                    FSQBH: '',  // 卸货区编号
                    FSQRL: '',  // 卸货区容量
                    FSQ_JD: '', // 卸货区经度
                    FSQ_WD: '', // 卸货区纬度
                    FSQ_GC: '', // 卸货区高程
                    FSQ_RL: '', //卸货区容量
                    FSQPX_IDX: '' // 卸货区排序索引
                }]
			}],
    },
		YZPZXX: { // 原则配置信息
			YXJ: '', // 取值0,1,  0表示用户指定优先的优先级最高，1表示默认规则的优先级最高
			PZXX: { // 原则配置信息
				BLYYYZ: { // 车辆运用原则
					ZDSLJKNS: '1', // 默认规则，填1  货物转载数量尽可能少
					CJZSY: '1', // 默认规则，填1   成建制使用
					BMKQZZ: '1', // 默认规则，填1   避免跨区作战
					JZFS: '1', // 取值0,1    0表示任务集中，1表示任务分散 
					DYSL: '1', // 取值0,1    0表示车辆数量最少，1车辆数量最多
					BTZPPBTDY: '', // 取值0,1   0表示启用不同组使用不同车辆，1表示不启用不同组匹配不同车辆
					ZDBLYX: {
						SFZDYX: '', //取值0,1    0表示不指定，1表示指定
						SYSX: '', // 取值0,1    0表示顺序使用，1表示反序使用
						FSY: [{ // 车队
							fSYBDNM: '', // 车队编号
							FSYYXJ: '', // 取值-1,0,1,2...， -1表示未指定车队，仅指定了车队下的车辆， 0,1,2,3...表示指定顺序
							FSDY: [{
							    FSDYBDNM: '', // 车辆编号
                                FSYYXJ: '' // 取值-1,0,1,2... 车辆优先级
							}]
						}]
					}
				},
				ZCYYYZ: {// 战场运用原则
					BMPMDDJC: '1', // 默认规则，填1  避免平面弹道交叉
					YGYYGFSQ: '1', // 默认规则，填1   一个车队一个卸货区域
					FSQYX: '1', // 取值0,1，  0表示卸货区优先，1表示卸货点优先
					FSZDYX: '1', // 取值0,1    0表示任务集中，1表示任务分散 
					SYSX: '', // 取值0,1,2,3    0表示顺序使用，1表示反序使用,2表示就近使用，3表示使用预设
					BSYXXX: { // 部署预想信息
						FSYBSYX: [{ // “车队-卸货区”预设情况
							fSYBDNM: '', // 车队编号内码
							FSQBH: '' // 取值-1,0,1,2...， -1表示未指定卸货区，仅指定了车队下的车辆
						}],
						FSDYBSYX: [{ // “车辆-卸货点”预设情况
							FSDYBDNM: '', // 车辆编号
							FSZDBH: '' // 卸货点编号
						}]
					},
					ZDZCYX: {  // 指定片区优先
						FSZD: [{ // 卸货点
                            FSZDBH: '', // 卸货点编号
                            FSZDYXJ: '' // 卸货点优先级0,1,2,3.....
						}],
						FSQ: [{  // 卸货区
							FSQBH: '', // 卸货区编号
							FSQYXJ: '' // 卸货区优先级0,1,2,3.....
						}]
					}
				}
			}
		}
	}



## 输出
### 车辆依托卸货位置分配关系序列
    RWFPJG: {
        SFCG: '', // 是否成功  取值0,1   0表示失败，1表示成功
        FPXL: [{ // 分配序列
            ID:'', // 任务ID
            FSDYBDNM:'', // 车辆编号
            FSWZBH:'', // 卸货位置编号
            FSWZLX:'',  // 卸货位置类型  取值0,1   0表示卸货点，1表示卸货区
        }],
        CWXX:'' // 错误信息
    }


TaskDistribution 
